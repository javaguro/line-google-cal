# LINE Calendar Bot

LINEを通じてGoogleカレンダーを操作できるボットです。自然言語でのコマンド入力に対応し、予定の作成、更新、削除が可能です。

## 機能

- 予定の作成
- 予定の更新
- 予定の削除
- オンラインミーティング（Google Meet）リンクの自動生成
- 参加者の招待
- 場所の指定

## セットアップ

1. 必要な環境変数を`.env`ファイルに設定
   - OPENAI_API_KEY
   - GOOGLE_CLIENT_ID
   - GOOGLE_CLIENT_SECRET
   - GOOGLE_REDIRECT_URI
   - LINE_CHANNEL_SECRET
   - LINE_CHANNEL_ACCESS_TOKEN

2. 依存関係のインストール
```bash
npm install
```

3. サーバーの起動
```bash
npm start
```

## 使用方法

### 基本的な予定登録
```
例：
- 明日14時に会議
- 今日の15時からミーティング
- 明日の昼の11時から1時間ミーティング
```

### 時間指定付きの予定登録
```
例：
- 今日の23時から2時間ミーティング
- 明日の13時から2時間のミーティング
- 13時から4時間不在
```

### 場所の指定
```
例：
- 明日15時から渋谷で打ち合わせ
- 今日の17時からカフェで面談
- 13時から会議室Aでミーティング
```

### オンラインミーティング設定
```
例：
- 13時から会議を設定して。Googleミートを使うからリンクも設定して
- 明日の会議をオンラインに変更して
```

### ゲストの招待
```
例：
- 明日13時からの会議に田中さん(tanaka@example.com)を招待
- 15時からの打ち合わせに佐藤さん(sato@gmail.com)と鈴木さん(suzuki@example.com)を追加して
```

### 予定の更新
```
例：
- 今日15時からのミーティングを16時からに変更
- 15時からのミーティングを16時からに変更。時間も1.5時間にして
- 明日の会議をオンラインに変更して、山田さん(yamada@example.com)を招待
```

## 入力可能な時間表現

### 日付指定
- `今日`
- `明日`
- `明後日`
- `来週`

### 時刻指定
- `14時`
- `午後2時`
- `昼の11時`
- `23時`

### 期間指定
- `1時間`
- `2時間`
- `1.5時間`
- `90分`
- `4時間`

## 注意事項

1. 初回利用時は認証が必要です
   - 予定登録時に自動的に認証URLが送信されます
   - URLをクリックしてGoogleアカウントとの連携を行ってください

2. 予定の長さ
   - 期間を指定しない場合は、デフォルトで1時間の予定として登録されます
   - 分単位（30分、90分など）や時間単位（1時間、2時間など）で指定可能です

3. ゲストの招待
   - メールアドレスを指定する必要があります
   - 複数のゲストを同時に招待できます
   - 招待されたゲストには自動的にメールが送信されます

4. オンラインミーティング
   - 「Googleミート」や「オンライン」などの表現を含めると、自動的にミーティングリンクが生成されます
   - 生成されたリンクは参加者全員に共有されます

5. 場所の指定
   - 実際の場所名や会議室名を指定できます
   - オンラインミーティングと場所を併用することも可能です 